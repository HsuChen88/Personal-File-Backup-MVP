/* Dashboard Styles - 檔案列表與元件設計 (Tab 切換版) */

/* ==========================================
   1. 列表容器與視窗
   ========================================== */

/* 讓列表視窗可以捲動，並填滿卡片剩餘空間 */
.lists-viewport {
    flex: 1;
    overflow-y: auto;
    padding-right: 5px;
    min-height: 0;
    width: 100%;
    position: relative;
}

/* 具體的列表區塊 (預設 block, 會被 JS 切換 display) */
.file-list {
    width: 100%;
    padding-bottom: 10px;
}

/* ==========================================
   2. Tab 切換按鈕 (New)
   ========================================== */

.list-tabs-container {
    display: flex;
    background: #f1f5f9;
    padding: 4px;
    border-radius: 8px;
    margin-bottom: 15px;
    gap: 4px;
}

.list-tab-btn {
    flex: 1;
    border: none;
    background: transparent;
    padding: 8px 12px;
    font-size: 13px;
    font-weight: 600;
    color: #64748b;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.2s;
    white-space: nowrap;
}

.list-tab-btn:hover {
    color: #334155;
    background: rgba(255, 255, 255, 0.5);
}

.list-tab-btn.active {
    background: #ffffff;
    color: #6366f1; /* 主題色 Indigo */
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.08);
}

/* ==========================================
   3. 搜尋框區域 (New)
   ========================================== */

.search-wrapper {
    display: flex;
    gap: 8px;
    margin-bottom: 12px;
    width: 100%;
}

.search-wrapper input {
    flex: 1;
    min-width: 0;
    margin-bottom: 0 !important;
    padding: 8px 12px;
    font-size: 13px;
    height: 36px;
}

.search-wrapper button {
    flex: 0 0 auto;
    width: auto !important;
    height: 36px;
    margin-top: 0 !important;
    padding: 0 15px !important;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
}

.search-wrapper button:hover {
    opacity: 0.9;
    transform: translateY(-1px);
}

/* ==========================================
   4. 檔案列樣式 (垂直堆疊版 - 適合側邊欄)
   ========================================== */

.file-row {
    display: flex;
    flex-direction: column; /* 垂直堆疊 */
    width: 100%;            
    padding: 12px;
    border: 1px solid #f1f5f9;
    border-radius: 8px;
    margin-bottom: 8px;
    background: #fff;
    transition: all 0.2s;
    overflow: hidden;
    align-items: flex-start;
    box-sizing: border-box;
}

.file-row:hover {
    background-color: #f8fafc;
    border-color: #e2e8f0;
    box-shadow: 0 2px 4px rgba(0,0,0,0.02);
}

/* 上層：圖示 + 資訊 */
.file-content-top {
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: flex-start;
    gap: 12px;
    width: 100%;
    min-width: 0; 
    margin-bottom: 8px;    
}

.file-icon {
    font-size: 24px;
    flex-shrink: 0;
}

.file-info {
    flex: 1;                
    min-width: 0; 
    display: flex;
    flex-direction: column;
    gap: 4px;
    text-align: left;
}

/* 檔名特效 */
.file-title {
    font-size: 14px;
    font-weight: 600;
    color: #334155;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis; /* 使用省略號 */
    display: block;
    width: 100%;
}

.file-meta {
    font-size: 12px;
    color: #94a3b8;
    display: flex;
    align-items: center;
    gap: 6px;
    white-space: nowrap;
    overflow: hidden;
}

/* 狀態標籤 */
.status-tag {
    padding: 1px 5px;
    border-radius: 4px;
    font-size: 10px;
    background: #ecfdf5;
    color: #059669;
    border: 1px solid #a7f3d0;
    flex-shrink: 0;
}

/* 下層：操作按鈕區 */
.file-actions {
    display: flex;
    justify-content: flex-end; 
    flex-wrap: nowrap !important;
    gap: 6px; 
    width: 100%;
    padding-top: 8px;
    border-top: 1px dashed #f1f5f9; 
}

/* 按鈕樣式 */
.action-btn {
    width: 32px; 
    height: 32px;
    padding: 0; 
    border-radius: 6px;
    border: 1px solid #e2e8f0;
    background: white;
    cursor: pointer;
    font-size: 14px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    flex: 0 0 auto; 
}

.action-btn:hover { 
    background: #f1f5f9; 
    border-color: #cbd5e1; 
    transform: translateY(-1px); 
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
}

/* ==========================================
   5. 閱讀器樣式
   ========================================== */

.viewer-card {
    display: flex !important;
    flex-direction: column !important;
    padding: 0 !important; 
    min-height: 0;
    overflow: hidden;
    height: 100%; /* 確保填滿父容器 */
}

.viewer-header {
    background: #f8fafc;
    padding: 10px 15px;
    border-bottom: 1px solid #e5e7eb;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 14px;
    font-weight: 600;
    color: #334155;
    flex: 0 0 auto;
}

.close-viewer-btn {
    background: #ffffff;
    border: 1px solid #e2e8f0;
    padding: 4px 12px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 12px;
    transition: all 0.2s;
    color: #64748b;
}

.close-viewer-btn:hover {
    background: #fef2f2;
    color: #ef4444;
    border-color: #fca5a5;
}

#docViewer {
    flex: 1;
    width: 100%;
    height: 100%;
    border: none;
    background: #f1f5f9;
    display: none; 
}

#viewerPlaceholder {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #94a3b8;
    background: #f8fafc;
}

/* 空狀態與錯誤狀態 */
.empty-state-gray {
    text-align: center;
    padding: 30px 10px;
    color: #9ca3af;
    font-size: 14px;
    border: 1px dashed #e5e7eb;
    border-radius: 8px;
    background: #f9fafb;
    margin-top: 10px;
}

.loading-state, .error-state {
    text-align: center;
    padding: 20px;
    font-size: 14px;
    color: #6b7280;
}

/* ==========================================
   6. 回收筒與刪除狀態樣式 (新增)
   ========================================== */

/* 已刪除檔案的列樣式 */
.file-row.deleted-row {
    background-color: #f9fafb; /* 較淡的背景 */
    opacity: 0.75;             /* 讓它看起來像無效 */
    border-style: dashed;      /* 邊框改虛線 */
}

/* 讓刪除的檔名有刪除線 */
.file-row.deleted-row .file-title {
    text-decoration: line-through;
    color: #94a3b8;
}

/* 狀態標籤：已刪除 */
.status-tag.status-deleted {
    background: #fef2f2;
    color: #ef4444;
    border-color: #fecaca;
}

/* 還原按鈕樣式 */
.action-btn.restore {
    color: #10b981; /* 綠色 */
    border-color: #10b981;
}
.action-btn.restore:hover {
    background: #ecfdf5;
}

/* ==========================================
   7. 列表區域固定高度與滾輪 (新增)
   ========================================== */

/* 針對 ID 進行設定，確保優先權高於 class */
#fileDashboardList, 
#publicFileList {
    /* 1. 設定列表最大高度 */
    /* 您可以依據螢幕大小調整此數值，例如 550px 或 60vh */
    max-height: 600px; 
    
    /* 2. 強制開啟垂直捲動 */
    overflow-y: auto;
    
    /* 3. 避免內容緊貼捲軸 */
    padding-right: 8px;
    box-sizing: border-box;
}

/* --- 捲軸美化 (搭配您的藍紫色系) --- */

/* 捲軸整體寬度 */
#fileDashboardList::-webkit-scrollbar,
#publicFileList::-webkit-scrollbar {
    width: 6px;
}

/* 捲軸軌道 (背景) */
#fileDashboardList::-webkit-scrollbar-track,
#publicFileList::-webkit-scrollbar-track {
    background: #f1f5f9;
    border-radius: 4px;
}

/* 捲軸本體 (拉桿) */
#fileDashboardList::-webkit-scrollbar-thumb,
#publicFileList::-webkit-scrollbar-thumb {
    background: #cbd5e1;
    border-radius: 4px;
}

/* 滑鼠移上去時變深 */
#fileDashboardList::-webkit-scrollbar-thumb:hover,
#publicFileList::-webkit-scrollbar-thumb:hover {
    background: #94a3b8;
}

/* ==========================================
   新增：還原狀態標籤 (Recover) - 淺藍色
   ========================================== */
.status-tag.status-recovered {
    background: #e0f2fe;  /* 淺藍背景 */
    color: #0284c7;       /* 深藍文字 */
    border-color: #bae6fd; /* 藍色邊框 */
}