/* Dashboard Styles - 檔案列表與元件設計 (強制單行圖示版) */

/* --- 檔案列表容器 --- */
.file-list {
    flex: 1;
    overflow-y: auto;
    padding-right: 5px;
    margin-top: 10px;
    min-height: 0;
    width: 100%; 
}

/* --- 檔案列 (垂直分層設計) --- */
.file-row {
    display: flex;
    flex-direction: column; /* 垂直堆疊 */
    width: 100%;            
    padding: 12px;
    border: 1px solid #f1f5f9;
    border-radius: 8px;
    margin-bottom: 10px;
    background: #fff;
    transition: all 0.2s;
    overflow: hidden;
    align-items: flex-start;
}

.file-row:hover {
    background-color: #f8fafc;
    border-color: #e2e8f0;
    box-shadow: 0 2px 4px rgba(0,0,0,0.02);
}

/* 上層：圖示 + 資訊 */
.file-content-top {
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: flex-start;
    gap: 12px;
    width: 100%;
    min-width: 0; /* 關鍵：允許縮小 */
    margin-bottom: 8px;    
}

.file-icon {
    font-size: 24px;
    flex-shrink: 0;
}

.file-info {
    flex: 1;                
    min-width: 0; /* 關鍵：觸發文字截斷 */
    display: flex;
    flex-direction: column;
    gap: 4px;
    text-align: left;
}

/* --- 檔名特效 (單行 + 漸層淡出) --- */
.file-title {
    font-size: 14px;
    font-weight: 600;
    color: #334155;
    white-space: nowrap;
    overflow: hidden;
    -webkit-mask-image: linear-gradient(to right, black 85%, transparent 100%);
    mask-image: linear-gradient(to right, black 85%, transparent 100%);
    display: block;
    width: 100%;
}

.file-meta {
    font-size: 12px;
    color: #94a3b8;
    display: flex;
    align-items: center;
    gap: 6px;
    white-space: nowrap;
    overflow: hidden;
}

/* --- 狀態標籤 --- */
.status-tag {
    padding: 1px 5px;
    border-radius: 4px;
    font-size: 10px;
    background: #ecfdf5;
    color: #059669;
    border: 1px solid #a7f3d0;
    flex-shrink: 0;
}

/* --- 下層：操作按鈕區 (關鍵修正) --- */
.file-actions {
    display: flex;
    /* 改為 Space-between 讓按鈕平均分散，或者 flex-end 靠右 */
    justify-content: flex-end; 
    
    /* ★★★ 強制不換行 ★★★ */
    flex-wrap: nowrap !important;
    
    gap: 6px; /* 按鈕之間的間距 */
    width: 100%;
    padding-top: 8px;
    border-top: 1px dashed #f1f5f9; 
    overflow: visible; /* 確保陰影不被切掉 */
}

/* 按鈕樣式：改為方形圖示按鈕 */
.action-btn {
    /* 設定固定寬高，確保四個按鈕能塞進一行 */
    width: 32px; 
    height: 32px;
    padding: 0; /* 移除內距，讓 Icon 居中 */
    
    border-radius: 6px;
    border: 1px solid #e2e8f0;
    background: white;
    cursor: pointer;
    font-size: 14px;
    
    /* Flex 居中大法 */
    display: flex;
    align-items: center;
    justify-content: center;
    
    transition: all 0.2s;
    flex: 0 0 auto; /* 禁止按鈕縮小 */
}

.action-btn:hover { 
    background: #f1f5f9; 
    border-color: #cbd5e1; 
    transform: translateY(-1px); 
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
}

/* --- 登出與使用者資訊 --- */
.user-info { font-size: 13px; color: #4b5563; }
#statusBarEmail { font-weight: 500; display: block; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }

.logout-btn-compact {
    width: 100%;
    background-color: #ffffff;
    color: #4b5563;
    border: 1px solid #e5e7eb;
    padding: 8px 0;
    border-radius: 8px;
    font-size: 13px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
}
.logout-btn-compact:hover { background-color: #fef2f2; color: #ef4444; border-color: #fca5a5; }

/* Dashboard Styles - 閱讀器元件 (從 HTML 移入) */

/* 閱讀器卡片：修正 Flex 屬性以填滿空間 */
.viewer-card {
    display: flex !important;
    flex-direction: column !important;
    padding: 0 !important; /* 移除內距讓 iframe 滿版 */
    min-height: 0;
    overflow: hidden;
}

/* 閱讀器標題列 */
.viewer-header {
    background: #f8fafc;
    padding: 10px 15px;
    border-bottom: 1px solid #e5e7eb;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 14px;
    font-weight: 600;
    color: #334155;
    flex: 0 0 auto; /* 防止被壓縮 */
}

/* 關閉按鈕 */
.close-viewer-btn {
    background: #ffffff;
    border: 1px solid #e2e8f0;
    padding: 4px 12px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 12px;
    transition: all 0.2s;
    color: #64748b;
}

.close-viewer-btn:hover {
    background: #fef2f2;
    color: #ef4444;
    border-color: #fca5a5;
}

/* Iframe 預覽視窗 */
#docViewer {
    flex: 1;
    width: 100%;
    height: 100%;
    border: none;
    background: #f1f5f9;
    display: none; /* 預設隱藏，由 JS 控制顯示 */
}

/* 空狀態提示 */
#viewerPlaceholder {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #94a3b8;
    background: #f8fafc;
}

/* --- Public Repository 搜尋欄修正 --- */

/* 確保搜尋容器使用 Flex 排列 */
.search-container {
    display: flex !important;
    gap: 6px !important;
    margin-bottom: 12px !important;
    width: 100%; /* 限制容器不超過父層 */
    box-sizing: border-box;
}

/* 輸入框：佔據剩餘空間，但允許縮小 */
#crawlerSearchInput {
    flex: 1;       /* 自動填滿剩餘空間 */
    min-width: 0;  /* ★關鍵：防止內容撐開導致溢出 */
    width: 100%;   /* 重置寬度 */
    margin-bottom: 0 !important;
    padding: 6px 10px;
    font-size: 13px;
    height: 32px; /* 固定高度，對齊按鈕 */
}

/* 搜尋按鈕：固定大小，禁止被壓縮 */
.search-container button {
    flex: 0 0 auto; /* 禁止縮小 */
    width: auto !important;
    margin-top: 0 !important;
    padding: 0 12px !important;
    height: 32px; /* 固定高度 */
    font-size: 13px;
    white-space: nowrap; /* 文字不換行 */
    
    /* 美化按鈕 */
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
}

.search-container button:hover {
    opacity: 0.9;
    transform: translateY(-1px);
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}